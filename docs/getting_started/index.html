<!doctype html>
<html style="background-color: #f5f5f5; min-height: 100%;">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>Getting Started</title>

  <link href="../../stylesheets/application.css" rel="stylesheet" />
  <link href="http://code.ionicframework.com/ionicons/1.4.1/css/ionicons.min.css" rel="stylesheet" />
  <script src="../../javascripts/application.js"></script>
</head>
<body class="docs docs_getting_started docs_getting_started_index">
  <nav class='navbar navbar-default opal-nav' role='navigation'>
  <div class='container'>
    <div class='navbar-header'>
      <a class='navbar-brand' href='/'>
        <img height='22' src='http://assets.makersacademy.com/images/logo/ma-white.png' width='44'>
        Makers Academy
      </a>
      <button class='navbar-toggle' data-target='#opal-navbar' data-toggle='collapse' type='button'>
        <span class='icon-bar'></span>
        <span class='icon-bar'></span>
        <span class='icon-bar'></span>
      </button>
    </div>
    <div class='navbar-collapse collapse' id='opal-navbar'>
      <ul class='nav navbar-nav'>
        <li>
          <a href='https://github.com/makersacademy'>
            <i class='ion-social-github'></i>
            GitHub
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

  <script>$('a[href="'+location.pathname.replace(/\/$/,'')+'"]').parent().addClass('active')</script>

  <div class="container">
      <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <h1>Getting Started</h1>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4 col-md-push-8">
        <ul class="nav opal-sidebar">
<li class="toc-list-chapter"><a href="#installation">Installation</a></li>
<li class="toc-list-chapter"><a href="#getting-started-with-opal">Getting started with Opal</a>
<ul class="subchapter">
<li class="toc-list-subchapter"><a href="#opal-compile">Opal.compile</a>
<li class="toc-list-subchapter"><a href="#opal-builder">Opal::Builder</a>
<li class="toc-list-subchapter"><a href="#cli">CLI</a>
<li class="toc-list-subchapter"><a href="#sprockets">Sprockets</a>
<li class="toc-list-subchapter"><a href="#tilt">Tilt</a></li>
</ul></li></ul>
      </div>

      <div class="col-md-8 col-md-pull-4">
        <p>Opal is a Ruby to JavaScript compiler, an implementation of the Ruby corelib and stdlib, and associated gems for building fast client side web applications in Ruby.</p>

<h2 id="installation">Installation</h2>

<p>Opal is available as a gem, and can be installed via:</p>
<pre class="highlight plaintext"><code>$ gem install opal
</code></pre>

<p>Or added to your Gemfile as:</p>
<pre class="highlight ruby"><code><span class="n">gem</span> <span class="s1">'opal'</span>
</code></pre>

<h2 id="getting-started-with-opal">Getting started with Opal</h2>

<h3 id="opal-compile">Opal.compile</h3>

<p>At its very core, Opal provides a simple method of compiling a string of Ruby into JavaScript that can run on top of the Opal runtime, provided by <code>opal.js</code>:</p>
<pre class="highlight ruby"><code><span class="no">Opal</span><span class="p">.</span><span class="nf">compile</span><span class="p">(</span><span class="s2">"[1, 2, 3].each { |a| puts a }"</span><span class="p">)</span>
<span class="c1"># =&gt; "(function() { ... })()"</span>
</code></pre>

<h3 id="opal-builder">Opal::Builder</h3>

<p>To build more complex projects, such as files that require other files, you can use <code>Opal::Builder</code>.  You can call <code>build</code> directly on <code>Opal::Builder</code>:</p>
<pre class="highlight ruby"><code><span class="no">Opal</span><span class="o">::</span><span class="no">Builder</span><span class="p">.</span><span class="nf">build</span><span class="p">(</span><span class="s1">'/path/to/file.rb'</span><span class="p">).</span><span class="nf">to_s</span>
</code></pre>

<p>Or you can create a new <code>Opal::Builder</code> instance and call <code>build</code> on it:</p>
<pre class="highlight ruby"><code><span class="n">builder</span> <span class="o">=</span> <span class="no">Opal</span><span class="o">::</span><span class="no">Builder</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:stubs</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'opal'</span><span class="p">])</span>
<span class="n">builder</span><span class="p">.</span><span class="nf">append_paths</span><span class="p">(</span><span class="s1">'assets/js'</span><span class="p">)</span>
<span class="n">builder</span><span class="p">.</span><span class="nf">use_gem</span><span class="p">(</span><span class="s1">'opal-jquery'</span><span class="p">)</span>
<span class="n">builder</span><span class="p">.</span><span class="nf">build</span><span class="p">(</span><span class="s1">'/path/to/file.rb'</span><span class="p">).</span><span class="nf">to_s</span>
</code></pre>

<p>In both cases, the output of <code>build(file).to_s</code> will be a string of JavaScript code.</p>

<p>By default <code>Opal::Builder</code> will include the runtime in the resulting JavaScript code, if you do not want that, use the <code>:stubs=&gt;[&#39;opal&#39;]</code> option as shown above.</p>

<h3 id="cli">CLI</h3>

<p>Opal includes an executable that can be used to build Opal projects, using the <code>-c</code> option:</p>
<pre class="highlight shell"><code>opal -c /path/to/file.rb &gt; /path/to/file.js
</code></pre>

<p>By default <code>opal</code> will include the runtime in the resulting JavaScript code, if you do not want that, use the <code>-O</code> option.</p>

<h3 id="sprockets">Sprockets</h3>

<p><code>Opal</code> includes sprockets support to sprockets for compiling Ruby (and erb) assets, and treating them as first class JavaScript citizens. It works in a similar way to CoffeeScript, where JavaScript files can simply require Ruby sources, and Ruby sources can require JavaScript and other Ruby files.</p>

<p>This relies on the Opal load path. Any gem containing Opal code registers that directory to the Opal load path. Opal will then use all Opal load paths when running sprockets instances. For Rails applications, opal-rails does this automatically. For building a simple application, we have to do this manually.</p>

<h3 id="tilt">Tilt</h3>

<p>Opal includes tilt support, so that you can compile Ruby files to JavaScript using tilt:</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'tilt/opal'</span>
<span class="no">Tilt</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'/path/to/file.rb'</span><span class="p">).</span><span class="nf">render</span>
</code></pre>

<p>By default, this uses <code>Opal.compile</code>, so it doesn&#39;t handle require calls inside the file.  You can use the <code>:build</code> option to use <code>Opal::Builder</code>, so that requires will work correctly:</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'tilt/opal'</span>
<span class="no">Tilt</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'/path/to/file.rb'</span><span class="p">,</span> <span class="ss">:build</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">).</span><span class="nf">render</span>
</code></pre>

<p>For more complete control, you can use the <code>:builder</code> option to pass in an <code>Opal::Builder</code> instance:</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'tilt/opal'</span>
<span class="n">builder</span> <span class="o">=</span> <span class="no">Opal</span><span class="o">::</span><span class="no">Builder</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">:stubs</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'opal'</span><span class="p">])</span>
<span class="no">Tilt</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'/path/to/file.rb'</span><span class="p">,</span> <span class="ss">:builder</span> <span class="o">=&gt;</span> <span class="n">builder</span><span class="p">).</span><span class="nf">render</span>
</code></pre>

      </div>
    </div>
  </div>

  </div>

  <!-- GOOGLE ANALYTICS -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35688734-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<footer>
  Powered by <a href="https://github.com/opal/">Opal</a>
</footer>


  <script>
    $('a[href="'+location.pathname.replace(/\/$/,'')+'"]').parent('li').addClass('active')
  </script>
</body>
</html>
