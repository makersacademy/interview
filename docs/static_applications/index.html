<!doctype html>
<html style="background-color: #f5f5f5; min-height: 100%;">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>Apply to Makers Academy</title>

  <link href="../../stylesheets/application.css" rel="stylesheet" />
  <link href="http://code.ionicframework.com/ionicons/1.4.1/css/ionicons.min.css" rel="stylesheet" />
  <script src="../../javascripts/application.js"></script>
</head>
<body class="docs docs_static_applications docs_static_applications_index">
  <nav class='navbar navbar-default opal-nav' role='navigation'>
  <div class='container'>
    <div class='navbar-header'>
      <a class='navbar-brand' href='/'>
        <img height='22' src='http://assets.makersacademy.com/images/logo/ma-white.png' width='44'>
        Makers Academy
      </a>
      <button class='navbar-toggle' data-target='#opal-navbar' data-toggle='collapse' type='button'>
        <span class='icon-bar'></span>
        <span class='icon-bar'></span>
        <span class='icon-bar'></span>
      </button>
    </div>
    <div class='navbar-collapse collapse' id='opal-navbar'>
      <ul class='nav navbar-nav'>
        <li>
          <a href='https://github.com/makersacademy'>
            <i class='ion-social-github'></i>
            GitHub
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

  <script>$('a[href="'+location.pathname.replace(/\/$/,'')+'"]').parent().addClass('active')</script>

  <div class="container">
      <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <h1></h1>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4 col-md-push-8">
        <ul class="nav opal-sidebar">
<li class="toc-list-chapter"><a href="#overview">Overview</a></li></ul>
      </div>

      <div class="col-md-8 col-md-pull-4">
        <h1 id="static-building">Static Building</h1>

<p><code>opal</code> makes it easy to build static Opal applications. Opal uses internal load
paths to make it easy to handle resolving requirements during building. <code>opal</code>
forms the basis of rails support, so anything you can do there, you can do
standalone as well.</p>

<h2 id="overview">Overview</h2>

<p>First, install <code>opal</code> adding them to a <code>Gemfile</code>:</p>
<pre class="highlight ruby"><code><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s2">"opal"</span><span class="p">,</span> <span class="s2">"~&gt; 0.7.0"</span>
</code></pre>

<p>Next, we want to add our main app code. Keep all Opal code inside <code>app/</code>
directory, and edit <code>app/application.rb</code>:</p>
<pre class="highlight ruby"><code><span class="c1"># app/application.rb</span>
<span class="nb">require</span> <span class="s2">"opal"</span>

<span class="nb">puts</span> <span class="s2">"Wow, running opal!"</span>
</code></pre>

<p>You will notice the <code>require &quot;opal&quot;</code> line which will automatically include the
Opal runtime and corelib into our output, giving us access to the <code>puts()</code>
method.</p>

<p>To build this, we need the rake task to add our
<code>app/</code> directory to the load path, and then to build our target file
<code>application.rb</code> which will be found because it is inside our added load path.</p>
<pre class="highlight ruby"><code><span class="c1"># Rakefile</span>
<span class="nb">require</span> <span class="s1">'opal'</span>

<span class="n">desc</span> <span class="s2">"Build our app to build.js"</span>
<span class="n">task</span> <span class="ss">:build</span> <span class="k">do</span>
  <span class="no">Opal</span><span class="p">.</span><span class="nf">append_path</span> <span class="s2">"app"</span>
  <span class="no">File</span><span class="p">.</span><span class="nf">binwrite</span> <span class="s2">"build.js"</span><span class="p">,</span> <span class="no">Opal</span><span class="o">::</span><span class="no">Builder</span><span class="p">.</span><span class="nf">build</span><span class="p">(</span><span class="s2">"application"</span><span class="p">).</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>

<p>Now, if you run <code>rake build</code> you will get the <code>build.js</code> output file with our
application compiled, with the Opal runtime included as well.</p>

<p>To run the application, lets create a very simple html file:</p>
<pre class="highlight html"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"build.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>

<p>Now, open this html file and check the browsers console. You should see our
message printed in the console.</p>

      </div>
    </div>
  </div>

  </div>

  <!-- GOOGLE ANALYTICS -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35688734-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<footer>
  Powered by <a href="https://github.com/opal/">Opal</a>
</footer>


  <script>
    $('a[href="'+location.pathname.replace(/\/$/,'')+'"]').parent('li').addClass('active')
  </script>
</body>
</html>
